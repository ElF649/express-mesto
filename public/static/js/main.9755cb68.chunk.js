(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{11:function(e,t,a){e.exports=a(16)},16:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(6),c=a.n(r),i=(a(5),a(10)),l=a(1),s=a(7),u=a.n(s);var m=function(){return o.a.createElement("header",{className:"header"},o.a.createElement("img",{className:"header__logo",alt:"mesto-russia",src:u.a}))},p=o.a.createContext();var d=function(e){var t=o.a.useContext(p),a=e.card.owner._id===t._id,n="".concat(a?"element__delete-button_visible":"element__delete-button_hidden"),r=e.card.likes.some((function(e){return e._id===t._id})),c="".concat(r?"element__like-button_active element__like-button":"element__like-button");return o.a.createElement("div",{className:"element"},o.a.createElement("button",{className:n,onClick:function(){e.onCardDelete(e.card)}}),o.a.createElement("img",{className:"element__image",src:"".concat(e.card.link),onClick:function(){e.onCardClick(e.card)}}),o.a.createElement("div",{className:"element__container"},o.a.createElement("h2",{className:"element__description"},e.card.name),o.a.createElement("div",{className:"element__like-element"},o.a.createElement("button",{className:c,onClick:function(){e.onCardLike(e.card)}}),o.a.createElement("p",{className:"element__like-counter"},e.card.likes.length))))},f=a(8),_=a(9),h=new(function(){function e(t){var a=t.baseURL,n=t.key;Object(f.a)(this,e),this._baseURL=a,this._key=n}return Object(_.a)(e,[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this._baseURL,"/cards"),{headers:{authorization:this._key}}).then((function(t){return e._getResponseData(t)}))}},{key:"getProfileInfo",value:function(){var e=this;return fetch("".concat(this._baseURL,"/users/me"),{headers:{authorization:this._key}}).then((function(t){return e._getResponseData(t)}))}},{key:"patchProfileInfo",value:function(e){var t=this,a=e.name,n=e.about;return fetch("".concat(this._baseURL,"/users/me"),{method:"PATCH",headers:{authorization:this._key,"Content-type":"application/json"},body:JSON.stringify({name:a,about:n})}).then((function(e){return t._getResponseData(e)}))}},{key:"postNewCard",value:function(e){var t=this,a=e.name,n=e.link;return fetch("".concat(this._baseURL,"/cards"),{method:"POST",headers:{authorization:this._key,"Content-type":"application/json"},body:JSON.stringify({name:a,link:n})}).then((function(e){return t._getResponseData(e)}))}},{key:"changeLikeCardStatus",value:function(e,t){var a=this;return fetch("".concat(this._baseURL,"/cards/likes/").concat(e),{method:"".concat(t?"PUT":"DELETE"),headers:{authorization:this._key}}).then((function(e){return a._getResponseData(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._baseURL,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._key}}).then((function(e){return t._getResponseData(e)}))}},{key:"patchAvatar",value:function(e){var t=this;return fetch("".concat(this._baseURL,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._key,"Content-type":"application/json"},body:JSON.stringify({avatar:e})}).then((function(e){return t._getResponseData(e)}))}}]),e}())({baseURL:"https://mesto.nomoreparties.co/v1/cohort-12",key:"cb60a489-6ec1-4e08-8c6a-5f804e99b68e"});var v=function(e){var t=o.a.useContext(p);return o.a.createElement("main",{className:"main-content"},o.a.createElement("section",{className:"profile"},o.a.createElement("div",{className:"profile__container"},o.a.createElement("div",{className:"profile__avatar-container",onClick:e.onEditAvatar},o.a.createElement("img",{className:"profile__avatar",src:"".concat(t&&t.avatar)}),o.a.createElement("div",{className:"profile__avatar-icon"})),o.a.createElement("div",{className:"profile__info"},o.a.createElement("div",{className:"profile__info-text-container"},o.a.createElement("h1",{className:"profile__info-name"},t&&t.name),o.a.createElement("p",{className:"profile__info-description"},t&&t.about)),o.a.createElement("button",{className:"profile__info-edit-button",onClick:e.onEditProfile},o.a.createElement("svg",{className:"profile__info-edit-button-img",width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{d:"M10 1.32827L2.60377 8.7666L1.28302 7.41936L8.66038 0L10 1.32827ZM0 10L1.96226 9.41177L0.584906 8.08349L0 10Z",fill:"white"}))))),o.a.createElement("button",{className:"add-button",onClick:e.onAddPlace},o.a.createElement("svg",{className:"add-button__image",width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{d:"M22 9.77778H12.2222V0H9.77778V9.77778H0V12.2222H9.77778V22H12.2222V12.2222H22V9.77778Z",fill:"white"})))),o.a.createElement("section",{className:"elements"},e.cards.map((function(t){return o.a.createElement(d,{card:t,cards:e.cards,onCardClick:e.onCardClick,key:t._id,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete})}))))};var E=function(){return o.a.createElement("footer",{className:"footer"},o.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Danilkin Nikita"))};var b=function(e){return o.a.createElement("div",{className:"popup ".concat(e.isOpen?"popup_is-opened":""," ")},o.a.createElement("div",{className:"popup__content"},o.a.createElement("button",{className:"popup__close-button",onClick:e.onClose},o.a.createElement("svg",{className:"popup__close-button-image",viewBox:"0 0 34 34",width:"33",height:"33",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{d:"M32.7661 29.5683L19.9759 16.778L32.7661 3.98779L29.5686 0.790236L16.7783 13.5805L3.98808 0.790236L0.790527 3.98779L13.5808 16.778L0.790527 29.5683L3.98808 32.7658L16.7783 19.9756L29.5686 32.7658L32.7661 29.5683Z",fill:"white"}))),o.a.createElement("h2",{className:"popup__title"},e.title),o.a.createElement("form",{className:"popup-form",noValidate:!0,onSubmit:e.onSubmit},e.children)))};function g(e){var t=o.a.useState(),a=Object(l.a)(t,2),n=a[0],r=a[1],c=o.a.useState(),i=Object(l.a)(c,2),s=i[0],u=i[1],m=o.a.useContext(p);return o.a.useEffect((function(){m&&(r(m.name),u(m.about))}),[m]),o.a.createElement(b,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:" ",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:n,about:s})},id:"popup-editprofile",children:o.a.createElement("fieldset",{className:"popup-form__set"},o.a.createElement("label",{className:"popup-form__field"},o.a.createElement("input",{className:"popup-form__input",name:"Name",onChange:function(e){r(e.target.value)},required:!0,minLength:"2",maxLength:"40",type:"text",pattern:"[a-zA-Z\u0410-\u042f\u0401\u0430-\u044f\u0451\\s\\-]+[^\\s\\-]+",id:"first-field-input",value:n}),o.a.createElement("span",{className:"popup-form__input-error",id:"first-field-input-error"})),o.a.createElement("label",{className:"popup-form__field"},o.a.createElement("input",{className:"popup-form__input",name:"Description",onChange:function(e){u(e.target.value)},required:!0,minLength:"2",maxLength:"200",id:"second-field-input",value:s}),o.a.createElement("span",{className:"popup-form__input-error",id:"second-field-input-error"})),o.a.createElement("button",{className:"popup-form__submit button",type:"submit"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))})}function N(e){var t=o.a.createRef();return o.a.createElement(b,{onClose:e.onClose,isOpen:e.isOpen,onSubmit:function(a){a.preventDefault(),e.onUpdateAvatar(t.current.value),t.current.value=""},title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:" ",id:"popup-changeavatar",children:o.a.createElement("fieldset",{className:"popup-form__set"},o.a.createElement("label",{className:"popup-form__field"},o.a.createElement("input",{className:"popup-form__input",required:!0,name:"link",type:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",id:"second-field-input",ref:t}),o.a.createElement("span",{className:"popup-form__input-error",id:"second-field-input-error"})),o.a.createElement("button",{className:"popup-form__submit button",type:"submit"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))})}function k(e){var t=o.a.createRef(),a=o.a.createRef();return o.a.createElement(b,{title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"add",id:"popup-createplace",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(n){n.preventDefault(),e.onAddPlace({name:t.current.value,link:a.current.value}),a.current.value="",t.current.value=""},children:o.a.createElement("fieldset",{className:"popup-form__set"},o.a.createElement("label",{className:"popup-form__field"},o.a.createElement("input",{className:"popup-form__input",ref:t,required:!0,minLength:"1",maxLength:"30",type:"text",name:"name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",id:"first-field-input"}),o.a.createElement("span",{className:"popup-form__input-error",id:"first-field-input-error"})),o.a.createElement("label",{className:"popup-form__field"},o.a.createElement("input",{className:"popup-form__input",ref:a,required:!0,name:"link",type:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",id:"second-field-input"}),o.a.createElement("span",{className:"popup-form__input-error",id:"second-field-input-error"})),o.a.createElement("button",{className:"popup-form__submit button",type:"submit"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"))})}var C=function(e){return o.a.createElement("div",{className:"popup ".concat(e.card?"popup_is-opened":""),id:"popup-withimage"},o.a.createElement("div",{className:"popup__withimage-content"},o.a.createElement("button",{className:"popup__close-button",onClick:e.onClose},o.a.createElement("svg",{className:"popup__close-button-image",viewBox:"0 0 34 34",width:"33",height:"33",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{d:"M32.7661 29.5683L19.9759 16.778L32.7661 3.98779L29.5686 0.790236L16.7783 13.5805L3.98808 0.790236L0.790527 3.98779L13.5808 16.778L0.790527 29.5683L3.98808 32.7658L16.7783 19.9756L29.5686 32.7658L32.7661 29.5683Z",fill:"white"}))),o.a.createElement("img",{className:"popup__image",src:"".concat(e.card?e.card.link:"")}),o.a.createElement("p",{className:"popup__caption"},e.card?e.card.name:"")))};var L=function(e){var t=o.a.useState(!1),a=Object(l.a)(t,2),n=a[0],r=a[1],c=o.a.useState(!1),s=Object(l.a)(c,2),u=s[0],d=s[1],f=o.a.useState(!1),_=Object(l.a)(f,2),b=_[0],L=_[1],w=o.a.useState(null),y=Object(l.a)(w,2),O=y[0],R=y[1],x=o.a.useState(null),S=Object(l.a)(x,2),D=S[0],U=S[1],j=o.a.useState([]),P=Object(l.a)(j,2),A=P[0],z=P[1];function H(){d(!1),r(!1),L(!1),R(null)}return o.a.useEffect((function(){h.getInitialCards().then((function(e){z(e)})).catch((function(e){console.log(e)}))}),[]),o.a.useEffect((function(){h.getProfileInfo().then((function(e){U(e)})).catch((function(e){console.log(e)}))}),[]),o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"page"},o.a.createElement(p.Provider,{value:D},o.a.createElement(m,null),o.a.createElement(v,{cards:A,onEditProfile:function(){r(!0)},onAddPlace:function(){d(!0)},onEditAvatar:function(){L(!0)},onCardClick:function(e){R(e)},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===D._id}));h.changeLikeCardStatus(e._id,!t).then((function(t){var a=A.map((function(a){return a._id===e._id?t:a}));z(a)}))},onCardDelete:function(e){h.deleteCard(e._id).then((function(){z(A.filter((function(t){return t!=e})))}))}}),o.a.createElement(E,null),o.a.createElement(k,{isOpen:u,onClose:H,onAddPlace:function(e){h.postNewCard(e).then((function(e){z([e].concat(Object(i.a)(A)))})).then((function(){H()})).catch((function(e){console.log(e)}))}}),o.a.createElement(g,{isOpen:n,onClose:H,onUpdateUser:function(e){h.patchProfileInfo(e).then((function(e){U(e)})).then((function(){H()})).catch((function(e){console.log(e)}))}}),o.a.createElement(N,{isOpen:b,onClose:H,onUpdateAvatar:function(e){h.patchAvatar(e).then((function(e){U(e)})).then((function(){H()})).catch((function(e){console.log(e)}))}}),o.a.createElement(C,{card:O,onClose:H}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},5:function(e,t,a){},7:function(e,t,a){e.exports=a.p+"static/media/header__logo.855a8c98.svg"}},[[11,1,2]]]);
//# sourceMappingURL=main.9755cb68.chunk.js.map